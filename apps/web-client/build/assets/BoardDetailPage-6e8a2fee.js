import{r as T,O as N,aq as ge,a as i,J as O,ad as ee,ae as fe,af as xe,ag as be,ai as F,aj as ye,aY as he,aZ as X,ab as Ce,aP as te,a_ as je,aX as ve,a$ as K,C as z,b0 as Se,b1 as $e,b2 as Oe,b3 as ne,a9 as Pe,b4 as we,an as Ee,a3 as Te,F as oe,I as Ne,b5 as Be,z as Ie,u as ze,j as s,b as Le,B as $,L as U,M as A,E as le,T as Y,H as De,D as Q,q as H}from"./index-04133603.js";import{B as Re,a as Ae}from"./Block.styles-4dce9da8.js";import{R as We,F as _e}from"./index.esm-38c62699.js";import{B as Fe}from"./index.esm-beb1c8be.js";import{g as Me,P as q}from"./boardUtil-98055900.js";import{l as G}from"./index-3963ac94.js";import{u as _}from"./useAppMutation-7d383faf.js";import{d as Ue}from"./dayjs.min-31734930.js";import{g as He}from"./getFileUrl-459fc159.js";import{g as qe}from"./getEmptyArray-f9e76269.js";import{z as J,u as Ge,a as ke,F as Ve}from"./index-6d19052b.js";import{S as Xe}from"./Skeleton-bb2403db.js";import{D as Ke,B as Ye}from"./index-9a58273b.js";import{T as w}from"./index-d2de38b1.js";import{I as Qe}from"./index-12cbf246.js";import"./iconBase-6e77fd94.js";import"./index-989aed08.js";import"./row-dbac2f85.js";import"./DownOutlined-5e397386.js";import"./SearchOutlined-d77ecd25.js";class Je{static createCommentUsingPost({request:t}){return T(N,{method:"POST",url:"/comment",body:t})}static updateCommentUsingPut({commentId:t,request:r}){return T(N,{method:"PUT",url:"/comment/{commentId}",path:{commentId:t},body:r})}static deleteCommentUsingDelete({commentId:t}){return T(N,{method:"DELETE",url:"/comment/{commentId}",path:{commentId:t}})}static likeCommentUsingPost({commentId:t}){return T(N,{method:"POST",url:"/comment/{commentId}/like",path:{commentId:t}})}}class Ze{static viewMyScrapsUsingGet({page:t}){return T(N,{method:"GET",url:"/scrap",query:{page:t}})}static addScrapUsingPost({postId:t}){return T(N,{method:"POST",url:"/scrap/{postId}",path:{postId:t}})}static deleteScrapUsingDelete({postId:t}){return T(N,{method:"DELETE",url:"/scrap/{postId}",path:{postId:t}})}}const et=ge.createContext({}),se=et,tt=e=>{let{children:t}=e;return t},nt=tt;function W(e){return e!=null}const ot=e=>{const{itemPrefixCls:t,component:r,span:n,className:o,style:l,labelStyle:a,contentStyle:c,bordered:p,label:m,content:d,colon:x}=e,C=r;return p?i.createElement(C,{className:O({[`${t}-item-label`]:W(m),[`${t}-item-content`]:W(d)},o),style:l,colSpan:n},W(m)&&i.createElement("span",{style:a},m),W(d)&&i.createElement("span",{style:c},d)):i.createElement(C,{className:O(`${t}-item`,o),style:l,colSpan:n},i.createElement("div",{className:`${t}-item-container`},(m||m===0)&&i.createElement("span",{className:O(`${t}-item-label`,{[`${t}-item-no-colon`]:!x}),style:a},m),(d||d===0)&&i.createElement("span",{className:O(`${t}-item-content`),style:c},d)))},k=ot;function V(e,t,r){let{colon:n,prefixCls:o,bordered:l}=t,{component:a,type:c,showLabel:p,showContent:m,labelStyle:d,contentStyle:x}=r;return e.map((C,j)=>{let{props:{label:S,children:v,prefixCls:b=o,className:g,style:f,labelStyle:h,contentStyle:B,span:P=1},key:E}=C;return typeof a=="string"?i.createElement(k,{key:`${c}-${E||j}`,className:g,style:f,labelStyle:Object.assign(Object.assign({},d),h),contentStyle:Object.assign(Object.assign({},x),B),span:P,colon:n,component:a,itemPrefixCls:b,bordered:l,label:p?S:null,content:m?v:null}):[i.createElement(k,{key:`label-${E||j}`,className:g,style:Object.assign(Object.assign(Object.assign({},d),f),h),span:1,colon:n,component:a[0],itemPrefixCls:b,bordered:l,label:S}),i.createElement(k,{key:`content-${E||j}`,className:g,style:Object.assign(Object.assign(Object.assign({},x),f),B),span:P*2-1,component:a[1],itemPrefixCls:b,bordered:l,content:v})]})}const lt=e=>{const t=i.useContext(se),{prefixCls:r,vertical:n,row:o,index:l,bordered:a}=e;return n?i.createElement(i.Fragment,null,i.createElement("tr",{key:`label-${l}`,className:`${r}-row`},V(o,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),i.createElement("tr",{key:`content-${l}`,className:`${r}-row`},V(o,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):i.createElement("tr",{key:l,className:`${r}-row`},V(o,e,Object.assign({component:a?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},st=lt,rt=e=>{const{componentCls:t,labelBg:r}=e;return{[`&${t}-bordered`]:{[`${t}-view`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"}},[`${t}-item-label, ${t}-item-content`]:{padding:`${e.padding}px ${e.paddingLG}px`,borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:r,"&::after":{display:"none"}},[`${t}-row`]:{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"}},[`&${t}-middle`]:{[`${t}-item-label, ${t}-item-content`]:{padding:`${e.paddingSM}px ${e.paddingLG}px`}},[`&${t}-small`]:{[`${t}-item-label, ${t}-item-content`]:{padding:`${e.paddingXS}px ${e.padding}px`}}}}},it=e=>{const{componentCls:t,extraColor:r,itemPaddingBottom:n,colonMarginRight:o,colonMarginLeft:l,titleMarginBottom:a}=e;return{[t]:Object.assign(Object.assign(Object.assign({},xe(e)),rt(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:a},[`${t}-title`]:Object.assign(Object.assign({},be),{flex:"auto",color:e.colorText,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:r,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${t}-row`]:{"> th, > td":{paddingBottom:n},"&:last-child":{borderBottom:"none"}},[`${t}-item-label`]:{color:e.colorTextTertiary,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${l}px ${o}px`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},at=ee("Descriptions",e=>{const t=fe(e,{});return[it(t)]},e=>({labelBg:e.colorFillAlter,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,extraColor:e.colorText}));var ct=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const re={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function mt(e,t){if(typeof e=="number")return e;if(typeof e=="object")for(let r=0;r<X.length;r++){const n=X[r];if(t[n]&&e[n]!==void 0)return e[n]||re[n]}return 3}function Z(e,t,r){let n=e;return(r===void 0||r>t)&&(n=te(e,{span:t})),n}function dt(e,t){const r=Ce(e).filter(a=>a),n=[];let o=[],l=t;return r.forEach((a,c)=>{var p;const m=(p=a.props)===null||p===void 0?void 0:p.span,d=m||1;if(c===r.length-1){o.push(Z(a,l,m)),n.push(o);return}d<l?(l-=d,o.push(a)):(o.push(Z(a,l,d)),n.push(o),l=t,o=[])}),n}const ie=e=>{const{prefixCls:t,title:r,extra:n,column:o=re,colon:l=!0,bordered:a,layout:c,children:p,className:m,rootClassName:d,style:x,size:C,labelStyle:j,contentStyle:S}=e,v=ct(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle"]),{getPrefixCls:b,direction:g,descriptions:f}=i.useContext(F),h=b("descriptions",t),[B,P]=i.useState({}),E=mt(o,B),L=ye(C),[u,y]=at(h),I=he();i.useEffect(()=>{const M=I.subscribe(R=>{typeof o=="object"&&P(R)});return()=>{I.unsubscribe(M)}},[]);const pe=dt(p,E),ue=i.useMemo(()=>({labelStyle:j,contentStyle:S}),[j,S]);return u(i.createElement(se.Provider,{value:ue},i.createElement("div",Object.assign({className:O(h,f==null?void 0:f.className,{[`${h}-${L}`]:L&&L!=="default",[`${h}-bordered`]:!!a,[`${h}-rtl`]:g==="rtl"},m,d,y),style:Object.assign(Object.assign({},f==null?void 0:f.style),x)},v),(r||n)&&i.createElement("div",{className:`${h}-header`},r&&i.createElement("div",{className:`${h}-title`},r),n&&i.createElement("div",{className:`${h}-extra`},n)),i.createElement("div",{className:`${h}-view`},i.createElement("table",null,i.createElement("tbody",null,pe.map((M,R)=>i.createElement(st,{key:R,index:R,colon:l,prefixCls:h,vertical:c==="vertical",bordered:a,row:M}))))))))};ie.Item=nt;const D=ie,pt=e=>{const{componentCls:t,iconCls:r,antCls:n,zIndexPopup:o,colorText:l,colorWarning:a,marginXXS:c,marginXS:p,fontSize:m,fontWeightStrong:d,colorTextHeading:x}=e;return{[t]:{zIndex:o,[`&${n}-popover`]:{fontSize:m},[`${t}-message`]:{marginBottom:p,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${r}`]:{color:a,fontSize:m,lineHeight:1,marginInlineEnd:p},[`${t}-title`]:{fontWeight:d,color:x,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:c,color:l}},[`${t}-buttons`]:{textAlign:"end",button:{marginInlineStart:p}}}}},ae=ee("Popconfirm",e=>pt(e),e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}});var ut=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const ce=e=>{const{prefixCls:t,okButtonProps:r,cancelButtonProps:n,title:o,description:l,cancelText:a,okText:c,okType:p="primary",icon:m=i.createElement(ne,null),showCancel:d=!0,close:x,onConfirm:C,onCancel:j,onPopupClick:S}=e,{getPrefixCls:v}=i.useContext(F),[b]=je("Popconfirm",ve.Popconfirm),g=K(o),f=K(l);return i.createElement("div",{className:`${t}-inner-content`,onClick:S},i.createElement("div",{className:`${t}-message`},m&&i.createElement("span",{className:`${t}-message-icon`},m),i.createElement("div",{className:`${t}-message-text`},g&&i.createElement("div",{className:O(`${t}-title`)},g),f&&i.createElement("div",{className:`${t}-description`},f))),i.createElement("div",{className:`${t}-buttons`},d&&i.createElement(z,Object.assign({onClick:j,size:"small"},n),a??(b==null?void 0:b.cancelText)),i.createElement(Se,{buttonProps:Object.assign(Object.assign({size:"small"},$e(p)),r),actionFn:C,close:x,prefixCls:v("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},c??(b==null?void 0:b.okText))))},gt=e=>{const{prefixCls:t,placement:r,className:n,style:o}=e,l=ut(e,["prefixCls","placement","className","style"]),{getPrefixCls:a}=i.useContext(F),c=a("popconfirm",t),[p]=ae(c);return p(i.createElement(Oe,{placement:r,className:O(c,n),style:o,content:i.createElement(ce,Object.assign({prefixCls:c},l))}))},ft=gt;var xt=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const me=i.forwardRef((e,t)=>{const{prefixCls:r,placement:n="top",trigger:o="click",okType:l="primary",icon:a=i.createElement(ne,null),children:c,overlayClassName:p,onOpenChange:m,onVisibleChange:d}=e,x=xt(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:C}=i.useContext(F),[j,S]=Pe(!1,{value:e.open,defaultValue:e.defaultOpen}),v=(u,y)=>{S(u,!0),d==null||d(u),m==null||m(u,y)},b=u=>{v(!1,u)},g=u=>{var y;return(y=e.onConfirm)===null||y===void 0?void 0:y.call(globalThis,u)},f=u=>{var y;v(!1,u),(y=e.onCancel)===null||y===void 0||y.call(globalThis,u)},h=u=>{u.keyCode===Te.ESC&&j&&v(!1,u)},B=u=>{const{disabled:y=!1}=e;y||v(u)},P=C("popconfirm",r),E=O(P,p),[L]=ae(P);return L(i.createElement(we,Object.assign({},Ee(x,["title"]),{trigger:o,placement:n,onOpenChange:B,open:j,ref:t,overlayClassName:E,content:i.createElement(ce,Object.assign({okType:l,icon:a},e,{prefixCls:P,close:b,onConfirm:g,onCancel:f})),"data-popover-inject":!0}),te(c,{onKeyDown:u=>{var y,I;i.isValidElement(c)&&((I=c==null?void 0:(y=c.props).onKeyDown)===null||I===void 0||I.call(y,u)),h(u)}})))});me._InternalPanelDoNotUseOrYouWillBeFired=ft;const bt=me,de=Le(({css:e})=>({wrapper:e`
    width: 100%;
    padding: 0 20px;
    box-sizing: border-box;
  `,fullWidth:e`
    width: 100%;
  `,writerAvatar:e`
    width: 50px;
    height: 50px;
  `,commentTextArea:e`
    min-width: 120px;
    resize: none;
  `,buttonGroup:e`
    justify-content: center;
    align-items: center;
    width: 100%;
  `,commentButtonWrap:e`
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 16px;
  `,whiteBlock:e`
    &.scope {
      padding: 30px 0;
    }
  `,actionButtonGroup:e`
    justify-content: flex-end;
    align-items: center;
    width: 100%;
  `,emotionButton:e`
    display: flex;
    align-items: center;
    gap: 4px;
  `,fileListBox:e`
    margin-top: 40px;
  `,fileListTitle:e`
    font-weight: 500;
  `,fileList:e`
    margin-top: 8px;
    display: flex;
    align-items: stretch;
    flex-direction: column;
    gap: 4px;
  `,fileItem:e`
    font-size: 14px;
  `,skeletonWrap:e`
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    padding: 20px;
    gap: 20px;
    box-sizing: border-box;
  `}));function Ft(){const{styles:e}=de(),t=oe(),r=Ne(),n=Be(),o=Number(n.id),{data:l,isLoading:a,isError:c}=Ie({queryKey:H.post.post(o),queryFn:()=>q.viewPostUsingGet({postId:o})}),{mutate:p}=_({mutationFn:q.likePostUsingPost}),{mutate:m}=_({mutationFn:Ze.addScrapUsingPost}),{mutate:d}=_({mutationFn:q.deletePostUsingDelete}),x=ze(g=>g.auth),C=(l==null?void 0:l.writerLoginId)===(x==null?void 0:x.user.memberId),j=()=>{if(C){t.warn("자기 자신의 글은 좋아요할 수 없습니다.");return}p({postId:o},{onSuccess(){Q.invalidateQueries(H.post.post(o)).catch(console.log)}})},S=()=>{if(C){t.warn("자기 자신의 글은 스크랩할 수 없습니다.");return}m({postId:o},{onSuccess(){Q.invalidateQueries(H.post.post(o)).catch(console.log)}})},v=()=>{d({postId:o},{onSuccess(){t.success("삭제되었습니다."),r.push(`/${A.BOARD}?${G.stringify({boardType:l==null?void 0:l.boardType})}`)}})},b=()=>a?s.jsx("div",{className:e.skeletonWrap,children:qe(3).map(g=>s.jsx(Xe,{active:!0},g))}):c?s.jsx(We,{status:"500",subTitle:"에러가 발생했습니다."}):s.jsxs($,{direction:"vertical",size:0,className:e.wrapper,split:s.jsx(Ke,{}),children:[s.jsx(Ye,{items:[{title:s.jsx(U,{to:`/${A.BOARD}`,children:"게시판"})},{title:s.jsx(U,{to:`/${A.BOARD}?${G.stringify({boardType:l.boardType})}`,children:Me(l.boardType??"FREE")})}]}),s.jsxs($,{direction:"vertical",size:"middle",className:e.fullWidth,children:[s.jsxs($,{align:"center",children:[s.jsx(le,{className:e.writerAvatar}),s.jsxs($,{direction:"vertical",size:0,children:[s.jsx(w.Text,{children:l.writerName}),s.jsx(w.Text,{type:"secondary",children:Ue(l.createdAt).format("YYYY. MM. DD")})]})]}),s.jsxs($,{direction:"vertical",size:0,children:[l.boardType==="JOB"?s.jsxs(D,{title:l.title,children:[s.jsx(D.Item,{label:"고용형태",children:l.position}),s.jsx(D.Item,{label:"지역",children:l.region}),s.jsx(D.Item,{label:"분야",children:l.field}),s.jsx(D.Item,{label:"마감일자",children:l.deadline})]}):s.jsx(w.Title,{level:2,children:l.title}),s.jsx("div",{dangerouslySetInnerHTML:{__html:l.body??""}}),s.jsxs("div",{className:e.fileListBox,children:[s.jsx(w.Text,{className:e.fileListTitle,children:"첨부파일"}),s.jsx("div",{className:e.fileList,children:l.fileList&&l.fileList.length>0?l.fileList.map((g,f)=>s.jsx("a",{href:He(g),download:g,className:e.fileItem,children:g},f)):s.jsx(w.Text,{children:"첨부파일이 없습니다."})})]})]}),s.jsxs($,{className:e.buttonGroup,children:[s.jsx(Y,{title:"좋아요",children:s.jsx(z,{icon:s.jsx(_e,{}),className:e.emotionButton,onClick:j,children:l.likeCount??0})}),s.jsx(Y,{title:"스크랩",children:s.jsx(z,{icon:s.jsx(Fe,{color:"orange"}),className:e.emotionButton,onClick:S,children:l.scrapCount??0})})]}),C&&s.jsxs($,{className:e.actionButtonGroup,children:[s.jsx(U,{to:`/${A.BOARD}/write?${G.stringify({boardType:l.boardType,postId:l.postId})}`,children:s.jsx(z,{type:"primary",children:"수정"})}),s.jsx(bt,{title:"게시글 삭제하기",description:"게시글을 정말 삭제하시겠어요?",okText:"네",cancelText:"아니요",onConfirm:v,children:s.jsx(z,{type:"primary",danger:!0,children:"삭제"})})]})]}),s.jsx(ht,{postId:o})]});return s.jsx(Re,{children:s.jsx(Ae,{className:O(e.whiteBlock,"scope"),children:b()})})}const yt=J.object({body:J.string().min(1)});function ht({postId:e}){const{styles:t}=de();oe();const r=Ge({initialValues:{body:""},validate:ke(yt)}),{mutate:n}=_({mutationFn:Je.createCommentUsingPost}),o=l=>{n({request:{anonymous:!1,postId:e,body:l.body}})};return s.jsxs($,{direction:"vertical",size:"large",className:t.fullWidth,children:[s.jsxs($,{align:"start",children:[s.jsx(le,{}),s.jsxs($,{direction:"vertical",size:0,children:[s.jsx(w.Text,{children:"풀씨짱123"}),s.jsx(w.Text,{children:"유익한 글이군요"}),s.jsx(w.Text,{type:"secondary",children:"2023. 07. 28"})]})]}),s.jsx(Ve,{onSubmitCapture:r.onSubmit(o,De),children:s.jsxs($,{direction:"vertical",className:t.fullWidth,children:[s.jsx(Qe.TextArea,{className:t.commentTextArea,placeholder:"댓글을 남겨주세요 :)",...r.getInputProps("body")}),s.jsx("div",{className:t.commentButtonWrap,children:s.jsx(z,{type:"primary",disabled:!r.isValid(),htmlType:"submit",children:"댓글 달기"})})]})})]})}export{Ft as default};
