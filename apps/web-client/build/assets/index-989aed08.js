var l=Symbol("@ts-pattern/matcher"),y="@ts-pattern/anonymous-select-key",m=function(e){return!!(e&&typeof e=="object")},v=function(e){return e&&!!e[l]},g=function e(n,t,a){if(m(n)){if(v(n)){var u=n[l]().match(t),i=u.matched,c=u.selections;return i&&c&&Object.keys(c).forEach(function(r){return a(r,c[r])}),i}if(!m(t))return!1;if(Array.isArray(n))return!!Array.isArray(t)&&n.length===t.length&&n.every(function(r,s){return e(r,t[s],a)});if(n instanceof Map)return t instanceof Map&&Array.from(n.keys()).every(function(r){return e(n.get(r),t.get(r),a)});if(n instanceof Set){if(!(t instanceof Set))return!1;if(n.size===0)return t.size===0;if(n.size===1){var o=Array.from(n.values())[0];return v(o)?Array.from(t.values()).every(function(r){return e(o,r,a)}):t.has(o)}return Array.from(n.values()).every(function(r){return t.has(r)})}return Object.keys(n).every(function(r){var s,h=n[r];return(r in t||v(s=h)&&s[l]().matcherType==="optional")&&e(h,t[r],a)})}return Object.is(t,n)};function f(e){var n;return(n={})[l]=function(){return{match:function(t){return{matched:!!e(t)}}}},n}f(function(e){return!0});f(function(e){return typeof e=="string"});f(function(e){return typeof e=="number"});f(function(e){return typeof e=="boolean"});f(function(e){return typeof e=="bigint"});f(function(e){return typeof e=="symbol"});f(function(e){return e==null});function b(e){return new d(e,[])}var d=function(){function e(t,a){this.value=void 0,this.cases=void 0,this.value=t,this.cases=a}var n=e.prototype;return n.with=function(){var t=[].slice.call(arguments),a=t[t.length-1],u=[t[0]],i=[];return t.length===3&&typeof t[1]=="function"?(u.push(t[0]),i.push(t[1])):t.length>2&&u.push.apply(u,t.slice(1,t.length-1)),new e(this.value,this.cases.concat([{match:function(c){var o={},r=!!(u.some(function(s){return g(s,c,function(h,p){o[h]=p})})&&i.every(function(s){return s(c)}));return{matched:r,value:r&&Object.keys(o).length?y in o?o[y]:o:c}},handler:a}]))},n.when=function(t,a){return new e(this.value,this.cases.concat([{match:function(u){return{matched:!!t(u),value:u}},handler:a}]))},n.otherwise=function(t){return new e(this.value,this.cases.concat([{match:function(a){return{matched:!0,value:a}},handler:t}])).run()},n.exhaustive=function(){return this.run()},n.run=function(){for(var t=this.value,a=void 0,u=0;u<this.cases.length;u++){var i=this.cases[u],c=i.match(this.value);if(c.matched){t=c.value,a=i.handler;break}}if(!a){var o;try{o=JSON.stringify(this.value)}catch{o=this.value}throw new Error("Pattern matching error: no pattern matches value "+o)}return a(t,this.value)},e}();export{b as K};
